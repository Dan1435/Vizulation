<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="authoring-tool" content="Adobe_Animate_CC">
<title>NumberedCards2</title>

<script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>
<script src="NumberedCards2.js"></script>

<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #fff;
  }

  body {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  #animation_container {
    width: 1280px;
    height: 720px;
    position: relative;
  }

  canvas {
    width: 1280px;
    height: 720px;
    display: block;
  }

  #dom_overlay_container {
    pointer-events: none;
    overflow: hidden;
    position: absolute;
    left: 0;
    top: 0;
    width: 1280px;
    height: 720px;
  }

  @media (max-width: 768px) and (orientation: portrait) {
    body {
      display: block;
    }

    #animation_container {
      width: 90vw;
      height: calc(90vw * 0.5625);
      margin: 0 auto;
    }

    canvas {
      width: 100% !important;
      height: 100% !important;
    }

    #dom_overlay_container {
      width: 100% !important;
      height: 100% !important;
    }
  }
</style>

<script>
var canvas, stage, exportRoot, anim_container, dom_overlay_container, fnStartAnimation;

function init() {
  canvas = document.getElementById("canvas");
  anim_container = document.getElementById("animation_container");
  dom_overlay_container = document.getElementById("dom_overlay_container");

  var comp = AdobeAn.getComposition("B543C4DCA9038D4494FB095F47CB2718");
  var lib = comp.getLibrary();
  var loader = new createjs.LoadQueue(false);

  loader.addEventListener("fileload", function(evt){ handleFileLoad(evt, comp) });
  loader.addEventListener("complete", function(evt){ handleComplete(evt, comp) });

  loader.loadManifest(lib.properties.manifest);
}

function handleFileLoad(evt, comp) {
  var images = comp.getImages();
  if (evt && evt.item.type === "image") {
    images[evt.item.id] = evt.result;
  }
}

function handleComplete(evt, comp) {
  var lib = comp.getLibrary();
  var ss = comp.getSpriteSheet();
  var queue = evt.target;
  var ssMetadata = lib.ssMetadata;

  for (var i = 0; i < ssMetadata.length; i++) {
    ss[ssMetadata[i].name] = new createjs.SpriteSheet({
      images: [queue.getResult(ssMetadata[i].name)],
      frames: ssMetadata[i].frames
    });
  }

  exportRoot = new lib.NumberedCards2();
  exportRoot.addEventListener("tick", AdobeAn.handleFilterCache);

  stage = new lib.Stage(canvas);
  stage.enableMouseOver();

  fnStartAnimation = function() {
    stage.addChild(exportRoot);
    createjs.Ticker.framerate = lib.properties.fps;
    createjs.Ticker.addEventListener("tick", stage);
  };

  AdobeAn.makeResponsive(true, 'both', false, 1, [canvas]);
  AdobeAn.compositionLoaded(lib.properties.id);
  fnStartAnimation();
}
</script>
</head>

<body onload="init();">
  <div id="animation_container">
    <canvas id="canvas" width="1280" height="720"></canvas>
    <div id="dom_overlay_container"></div>
  </div>
</body>
</html>
